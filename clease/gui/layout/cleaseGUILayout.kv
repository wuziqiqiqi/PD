#:include concentrationPageLayout.kv
#:include settingsPageLayout.kv
#:include newStructPageLayout.kv
#:include fitLayout.kv
#:include lassoEditorLayout.kv
#:include l2EditorLayout.kv
#:include bcsEditorLayout.kv
#:include gaEditor.kv
#: set height 0.05


<ActionBar>:
    pos_hint: {'top':1}
    size_hint: [1, 0.05]
    ActionView:
        use_separator: True
        ActionPrevious:
            title: 'CLEASE GUI'
            with_previous: False
            app_icon: 'clease_logo.png'

        ActionGroup:
            id: App_ActionGroup
            mode: 'spinner'
            text: 'Jump to Screen'

            ActionButton:
                text: 'Concentration'
                on_release:  app.root.ids.sm.current = 'Concentration'
            ActionButton:
                text: 'Settings'
                on_release:  app.root.ids.sm.current = 'Settings'
            ActionButton:
                text: 'NewStruct'
                on_release:  app.root.ids.sm.current = 'NewStruct'
            ActionButton:
                text: 'Fit'
                on_release:  app.root.ids.sm.current = 'Fit'

        ActionGroup:
            id: File_ActionGroup
            mode: 'spinner'
            text: 'File'

            ActionButton:
                text: 'Save'
                # on_press: app.
            ActionButton:
                text: 'Save As...'
            ActionButton:
                text: 'Open'
            ActionButton:
                text: 'Close'
                on_press: app.get_running_app().stop()


<WindowFrame>:
    orientation: 'vertical'

    ActionBar:
        id: ActionBar

    ScreenManager:
        id: sm
        size_hint: 1, .8
        ConcentrationPage:
        SettingsPage:
        NewStructPage:
        FitPage:

    # StatusBar:
    #     id: sb


<LoadDialog>:
    StackLayout:
        size_hint: [1, 0.9]

        FileChooserListView:
            size_hint: [1, 1]
            id: filechooser
            path: '.'

    StackLayout:
        size_hint: [1, 0.1]

        Label:
            size_hint: [1.0, 0.45]
            text: ''

        Button:
            size_hint: [0.5, 0.55]
            id: cancelButton
            text: "Cancel"
            on_release: root.cancel()

        Button:
            size_hint: [0.5, 0.55]
            text: "Load"
            on_release: root.load(filechooser.path, filechooser.selection)



<SaveDialog>:
    StackLayout:
        size_hint: [1, 0.8175]

        FileChooserListView:
            size_hint: [1, 1]
            id: filechooser
            path: '.'

    StackLayout:
        size_hint: [1, 0.045]

        Label:
            size_hint: [1.0, 1.0]
            text: ''

    StackLayout:
        size_hint: [1, 0.1375]

        TextInput:
            size_hint: [1, 0.4]
            id: userFilename
            text: 'cleaseDemo.json'

        Label:
            size_hint: [1.0, 0.2]
            text: ''

        Button:
            size_hint: [0.5, 0.4]
            text: "Cancel"
            on_release: root.cancel()

        Button:
            size_hint: [0.5, 0.4]
            text: "Save"
            on_release: root.save(filechooser.path, filechooser.selection, userFilename.text)
